!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequire216a;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequire216a=a);var o,s="Expected a function",i=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt,f="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,g=f||m||Function("return this")(),h=Object.prototype.toString,v=Math.max,y=Math.min,p=function(){return g.Date.now()};function L(e,t,r){var n,a,o,i,c,l,u=0,d=!1,f=!1,m=!0;if("function"!=typeof e)throw new TypeError(s);function g(t){var r=n,o=a;return n=a=void 0,u=t,i=e.apply(o,r)}function h(e){return u=e,c=setTimeout(w,t),d?g(e):i}function L(e){var r=e-l;return void 0===l||r>=t||r<0||f&&e-u>=o}function w(){var e=p();if(L(e))return x(e);c=setTimeout(w,function(e){var r=t-(e-l);return f?y(r,o-(e-u)):r}(e))}function x(e){return c=void 0,m&&n?g(e):(n=a=void 0,i)}function _(){var e=p(),r=L(e);if(n=arguments,a=this,l=e,r){if(void 0===c)return h(l);if(f)return c=setTimeout(w,t),g(l)}return void 0===c&&(c=setTimeout(w,t)),i}return t=b(t)||0,S(r)&&(d=!!r.leading,o=(f="maxWait"in r)?v(b(r.maxWait)||0,t):o,m="trailing"in r?!!r.trailing:m),_.cancel=function(){void 0!==c&&clearTimeout(c),u=0,n=l=a=c=void 0},_.flush=function(){return void 0===c?i:x(p())},_}function S(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(S(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=S(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var r=l.test(e);return r||u.test(e)?d(e.slice(2),r?2:8):c.test(e)?NaN:+e}o=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError(s);return S(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),L(e,t,{leading:n,maxWait:t,trailing:a})};var w=a("2Z7mb"),x=a("cQkN8"),_=a("hnyov"),E=a("jcFG7"),T=a("5cQgp");const q="trending_current_page",I="search_current_page",j="search_query",N=(new(0,w.default)("#slider"),new(0,x.default)),F=new(0,_.default)("queue");document.querySelectorAll(".modal").forEach((e=>e.style.display="none"));const M={cardsUl:document.querySelector(".gallery__list"),pagination:document.querySelector(".gallery__pagination"),header:document.querySelector("header"),footer:document.querySelector("footer"),main:document.querySelector("main"),searchForm:document.querySelector(".hero-home__form"),loader:document.querySelector(".loader"),homeLinks:document.querySelectorAll(".js-home")},O=e(o)((()=>{const e=document.querySelector(".search-fail");e&&(e.remove(),M.searchForm.removeEventListener("input",O))}),250);function C(e){M.cardsUl.innerHTML=(0,T.default)({results:e.results,base_path:x.default.IMAGES_BASE_URL}),M.pagination.innerHTML=(0,E.default)(e)}async function D(e){let t;const r=document.querySelector(".search-fail");r&&r.remove();const n=sessionStorage.getItem(j);if(n){M.searchForm.elements.searchQuery.value=n,M.loader.classList.remove("is-hidden");try{t=await N.fetchNextSearch("",e),sessionStorage.setItem(I,t.page),C(t)}catch(e){console.log(e.message)}finally{M.loader.classList.add("is-hidden")}}else{M.searchForm.elements.searchQuery.value="",M.loader.classList.remove("is-hidden");try{t=await N.fetchNextTrending(e),sessionStorage.setItem(q,t.page),C(t)}catch(e){console.log(e.message)}finally{M.loader.classList.add("is-hidden")}}}M.homeLinks.forEach((e=>{e.addEventListener("click",(e=>{sessionStorage.removeItem(I),sessionStorage.removeItem(j),sessionStorage.removeItem(q)}))})),M.cardsUl.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("LI");t&&(F.inList(t.dataset.id)?F.removeFromList(t.dataset.id):F.addToList(N.getCachedMovieById(t.dataset.id)))})),M.searchForm.addEventListener("submit",(async e=>{e.preventDefault();const t=document.querySelector(".search-fail");t&&t.remove();const r=e.target.elements.searchQuery.value.trim().toLowerCase();if(!r)return;let n;e.target.elements.searchQuery.value=r,M.loader.classList.remove("is-hidden");try{n=await N.fetchNextSearch(r),sessionStorage.setItem(I,1)}catch(e){return void console.error(e.message)}finally{M.loader.classList.add("is-hidden")}if(!n.results.length){const t=document.createElement("DIV");return t.textContent="Search result not successful. Enter the correct movie name and try again.",t.classList.add("search-fail"),e.target.appendChild(t),void M.searchForm.addEventListener("input",O)}sessionStorage.setItem(j,r),C(n)})),M.pagination.addEventListener("click",(async e=>{if(e.target.classList.contains("gallery__pag-button--current")){if("1"===e.target.dataset.pages)return;const t=`<form style=""><input type="number" name="page" max="${e.target.dataset.pages}" min="1" value="${e.target.textContent}" style="width:100%; height:100%"></form>`;e.target.innerHTML=t;const r=e.target.querySelector("form");return r.elements.page.focus(),r.elements.page.select(),r.addEventListener("submit",(async t=>{t.preventDefault(),D(t.target.elements.page.value),e.target.textContent=e.target.dataset.curpage}),{once:!0}),void r.elements.page.addEventListener("blur",(t=>{r.remove(),e.target.textContent=e.target.dataset.curpage}),{once:!0})}const t=e.target.dataset.page;t&&D(t)})),(async()=>{const e=sessionStorage.getItem(j);if(e){M.searchForm.elements.searchQuery.value=e;const t=sessionStorage.getItem(I);let r;M.loader.classList.remove("is-hidden");try{r=await N.fetchNextSearch(e,t||1)}catch(e){console.error(e.message)}finally{M.loader.classList.add("is-hidden")}C(r)}else{const e=sessionStorage.getItem(q);let t;M.loader.classList.remove("is-hidden");try{t=await N.fetchNextTrending(e||1)}catch(e){console.error(e.message)}finally{M.loader.classList.add("is-hidden")}if(!t.results.length)return void(M.cardsUl.innerHTML="<li>There is no trending movies.</li>");C(t)}})()}();
//# sourceMappingURL=index.2f3a0e82.js.map

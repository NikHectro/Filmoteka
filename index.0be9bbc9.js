function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequire216a;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequire216a=a);var o,s=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,f=u||m||Function("return this")(),g=Object.prototype.toString,h=Math.max,y=Math.min,p=function(){return f.Date.now()};function v(e,t,r){var n,a,o,s,i,c,l=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=n,o=a;return n=a=void 0,l=t,s=e.apply(o,r)}function g(e){return l=e,i=setTimeout(b,t),d?f(e):s}function v(e){var r=e-c;return void 0===c||r>=t||r<0||u&&e-l>=o}function b(){var e=p();if(v(e))return S(e);i=setTimeout(b,function(e){var r=t-(e-c);return u?y(r,o-(e-l)):r}(e))}function S(e){return i=void 0,m&&n?f(e):(n=a=void 0,s)}function E(){var e=p(),r=v(e);if(n=arguments,a=this,c=e,r){if(void 0===i)return g(c);if(u)return i=setTimeout(b,t),f(c)}return void 0===i&&(i=setTimeout(b,t)),s}return t=_(t)||0,L(r)&&(d=!!r.leading,o=(u="maxWait"in r)?h(_(r.maxWait)||0,t):o,m="trailing"in r?!!r.trailing:m),E.cancel=function(){void 0!==i&&clearTimeout(i),l=0,n=c=a=i=void 0},E.flush=function(){return void 0===i?s:S(p())},E}function L(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==g.call(e)}(e))return NaN;if(L(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=L(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=c.test(e);return r||l.test(e)?d(e.slice(2),r?2:8):i.test(e)?NaN:+e}o=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return L(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),v(e,t,{leading:n,maxWait:t,trailing:a})};var b=a("brr8Z"),S=a("5gHzC"),E=a("9N7Qa"),w=a("2nhTy"),T=a("44W7Q");const x=throttle((()=>{const e=document.getElementById("progress"),t=(document.getElementById("progress-value"),document.documentElement.scrollTop),r=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=Math.round(100*t/r);console.log(n),e.style.display=t>100?"grid":"none",e.addEventListener("click",(()=>{document.documentElement.scrollTop=0})),e.style.background=`conic-gradient(#545454 ${n}%, #bbbbbb ${n}%)`}),THROTTLE_DELAY);window.onscroll=x,window.onload=x;new(0,b.default)("#slider");const q=new(0,S.default),I=new(0,E.default)("queue");document.querySelectorAll(".modal").forEach((e=>e.style.display="none"));const N={cardsUl:document.querySelector(".gallery__list"),pagination:document.querySelector(".gallery__pagination"),header:document.querySelector("header"),footer:document.querySelector("footer"),main:document.querySelector("main"),searchForm:document.querySelector(".hero-home__form"),loader:document.querySelector(".loader"),homeLinks:document.querySelectorAll(".js-home")},j=e(o)((()=>{const e=document.querySelector(".search-fail");e&&(e.remove(),N.searchForm.removeEventListener("input",j))}),250);function M(e){N.cardsUl.innerHTML=(0,T.default)({results:e.results,base_path:S.default.IMAGES_BASE_URL}),N.pagination.innerHTML=(0,w.default)(e)}async function O(e){let t;const r=document.querySelector(".search-fail");r&&r.remove();const n=sessionStorage.getItem("search_query");if(n){N.searchForm.elements.searchQuery.value=n,N.loader.classList.remove("is-hidden");try{t=await q.fetchNextSearch("",e),sessionStorage.setItem("search_current_page",t.page),M(t)}catch(e){console.log(e.message)}finally{N.loader.classList.add("is-hidden")}}else{N.searchForm.elements.searchQuery.value="",N.loader.classList.remove("is-hidden");try{t=await q.fetchNextTrending(e),sessionStorage.setItem("trending_current_page",t.page),M(t)}catch(e){console.log(e.message)}finally{N.loader.classList.add("is-hidden")}}}N.homeLinks.forEach((e=>{e.addEventListener("click",(e=>{sessionStorage.removeItem("search_current_page"),sessionStorage.removeItem("search_query"),sessionStorage.removeItem("trending_current_page")}))})),N.cardsUl.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("LI");t&&(I.inList(t.dataset.id)?I.removeFromList(t.dataset.id):I.addToList(q.getCachedMovieById(t.dataset.id)))})),N.searchForm.addEventListener("submit",(async e=>{e.preventDefault();const t=document.querySelector(".search-fail");t&&t.remove();const r=e.target.elements.searchQuery.value.trim().toLowerCase();if(!r)return;let n;e.target.elements.searchQuery.value=r,N.loader.classList.remove("is-hidden");try{n=await q.fetchNextSearch(r),sessionStorage.setItem("search_current_page",1)}catch(e){return void console.error(e.message)}finally{N.loader.classList.add("is-hidden")}if(!n.results.length){const t=document.createElement("DIV");return t.textContent="Search result not successful. Enter the correct movie name and try again.",t.classList.add("search-fail"),e.target.appendChild(t),void N.searchForm.addEventListener("input",j)}sessionStorage.setItem("search_query",r),M(n)})),N.pagination.addEventListener("click",(async e=>{if(e.target.classList.contains("gallery__pag-button--current")){if("1"===e.target.dataset.pages)return;const t=`<form style=""><input type="number" name="page" max="${e.target.dataset.pages}" min="1" value="${e.target.textContent}" style="width:100%; height:100%"></form>`;e.target.innerHTML=t;const r=e.target.querySelector("form");return r.elements.page.focus(),r.elements.page.select(),r.addEventListener("submit",(async t=>{t.preventDefault(),O(t.target.elements.page.value),e.target.textContent=e.target.dataset.curpage}),{once:!0}),void r.elements.page.addEventListener("blur",(t=>{r.remove(),e.target.textContent=e.target.dataset.curpage}),{once:!0})}const t=e.target.dataset.page;t&&O(t)})),(async()=>{const e=sessionStorage.getItem("search_query");if(e){N.searchForm.elements.searchQuery.value=e;const t=sessionStorage.getItem("search_current_page");let r;N.loader.classList.remove("is-hidden");try{r=await q.fetchNextSearch(e,t||1)}catch(e){console.error(e.message)}finally{N.loader.classList.add("is-hidden")}M(r)}else{const e=sessionStorage.getItem("trending_current_page");let t;N.loader.classList.remove("is-hidden");try{t=await q.fetchNextTrending(e||1)}catch(e){console.error(e.message)}finally{N.loader.classList.add("is-hidden")}if(!t.results.length)return void(N.cardsUl.innerHTML="<li>There is no trending movies.</li>");M(t)}})();
//# sourceMappingURL=index.0be9bbc9.js.map

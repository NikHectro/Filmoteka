!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire216a;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequire216a=o);var a,s="Expected a function",i=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,d=/^0o[0-7]+$/i,u=parseInt,m="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,g=m||f||Function("return this")(),h=Object.prototype.toString,y=Math.max,v=Math.min,p=function(){return g.Date.now()};function L(e,t,n){var r,o,a,i,c,l,d=0,u=!1,m=!1,f=!0;if("function"!=typeof e)throw new TypeError(s);function g(t){var n=r,a=o;return r=o=void 0,d=t,i=e.apply(a,n)}function h(e){return d=e,c=setTimeout(E,t),u?g(e):i}function L(e){var n=e-l;return void 0===l||n>=t||n<0||m&&e-d>=a}function E(){var e=p();if(L(e))return w(e);c=setTimeout(E,function(e){var n=t-(e-l);return m?v(n,a-(e-d)):n}(e))}function w(e){return c=void 0,f&&r?g(e):(r=o=void 0,i)}function T(){var e=p(),n=L(e);if(r=arguments,o=this,l=e,n){if(void 0===c)return h(l);if(m)return c=setTimeout(E,t),g(l)}return void 0===c&&(c=setTimeout(E,t)),i}return t=S(t)||0,b(n)&&(u=!!n.leading,a=(m="maxWait"in n)?y(S(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),T.cancel=function(){void 0!==c&&clearTimeout(c),d=0,r=l=o=c=void 0},T.flush=function(){return void 0===c?i:w(p())},T}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function S(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=l.test(e);return n||d.test(e)?u(e.slice(2),n?2:8):c.test(e)?NaN:+e}a=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(s);return b(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),L(e,t,{leading:r,maxWait:t,trailing:o})};var E=o("2Z7mb"),w=o("cQkN8"),T=o("hnyov"),x=o("jcFG7"),_=o("5cQgp");const I=throttle((()=>{const e=document.getElementById("progress"),t=(document.getElementById("progress-value"),document.documentElement.scrollTop),n=document.documentElement.scrollHeight-document.documentElement.clientHeight,r=Math.round(100*t/n);console.log(r),e.style.display=t>100?"grid":"none",e.addEventListener("click",(()=>{document.documentElement.scrollTop=0})),e.style.background=`conic-gradient(#545454 ${r}%, #bbbbbb ${r}%)`}),THROTTLE_DELAY);window.onscroll=I,window.onload=I;const q="trending_current_page",j="search_current_page",N="search_query",F=(new(0,E.default)("#slider"),new(0,w.default)),M=new(0,T.default)("queue");document.querySelectorAll(".modal").forEach((e=>e.style.display="none"));const O={cardsUl:document.querySelector(".gallery__list"),pagination:document.querySelector(".gallery__pagination"),header:document.querySelector("header"),footer:document.querySelector("footer"),main:document.querySelector("main"),searchForm:document.querySelector(".hero-home__form"),loader:document.querySelector(".loader"),homeLinks:document.querySelectorAll(".js-home")},k=e(a)((()=>{const e=document.querySelector(".search-fail");e&&(e.remove(),O.searchForm.removeEventListener("input",k))}),250);function C(e){O.cardsUl.innerHTML=(0,_.default)({results:e.results,base_path:w.default.IMAGES_BASE_URL}),O.pagination.innerHTML=(0,x.default)(e)}async function D(e){let t;const n=document.querySelector(".search-fail");n&&n.remove();const r=sessionStorage.getItem(N);if(r){O.searchForm.elements.searchQuery.value=r,O.loader.classList.remove("is-hidden");try{t=await F.fetchNextSearch("",e),sessionStorage.setItem(j,t.page),C(t)}catch(e){console.log(e.message)}finally{O.loader.classList.add("is-hidden")}}else{O.searchForm.elements.searchQuery.value="",O.loader.classList.remove("is-hidden");try{t=await F.fetchNextTrending(e),sessionStorage.setItem(q,t.page),C(t)}catch(e){console.log(e.message)}finally{O.loader.classList.add("is-hidden")}}}O.homeLinks.forEach((e=>{e.addEventListener("click",(e=>{sessionStorage.removeItem(j),sessionStorage.removeItem(N),sessionStorage.removeItem(q)}))})),O.cardsUl.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("LI");t&&(M.inList(t.dataset.id)?M.removeFromList(t.dataset.id):M.addToList(F.getCachedMovieById(t.dataset.id)))})),O.searchForm.addEventListener("submit",(async e=>{e.preventDefault();const t=document.querySelector(".search-fail");t&&t.remove();const n=e.target.elements.searchQuery.value.trim().toLowerCase();if(!n)return;let r;e.target.elements.searchQuery.value=n,O.loader.classList.remove("is-hidden");try{r=await F.fetchNextSearch(n),sessionStorage.setItem(j,1)}catch(e){return void console.error(e.message)}finally{O.loader.classList.add("is-hidden")}if(!r.results.length){const t=document.createElement("DIV");return t.textContent="Search result not successful. Enter the correct movie name and try again.",t.classList.add("search-fail"),e.target.appendChild(t),void O.searchForm.addEventListener("input",k)}sessionStorage.setItem(N,n),C(r)})),O.pagination.addEventListener("click",(async e=>{if(e.target.classList.contains("gallery__pag-button--current")){if("1"===e.target.dataset.pages)return;const t=`<form style=""><input type="number" name="page" max="${e.target.dataset.pages}" min="1" value="${e.target.textContent}" style="width:100%; height:100%"></form>`;e.target.innerHTML=t;const n=e.target.querySelector("form");return n.elements.page.focus(),n.elements.page.select(),n.addEventListener("submit",(async t=>{t.preventDefault(),D(t.target.elements.page.value),e.target.textContent=e.target.dataset.curpage}),{once:!0}),void n.elements.page.addEventListener("blur",(t=>{n.remove(),e.target.textContent=e.target.dataset.curpage}),{once:!0})}const t=e.target.dataset.page;t&&D(t)})),(async()=>{const e=sessionStorage.getItem(N);if(e){O.searchForm.elements.searchQuery.value=e;const t=sessionStorage.getItem(j);let n;O.loader.classList.remove("is-hidden");try{n=await F.fetchNextSearch(e,t||1)}catch(e){console.error(e.message)}finally{O.loader.classList.add("is-hidden")}C(n)}else{const e=sessionStorage.getItem(q);let t;O.loader.classList.remove("is-hidden");try{t=await F.fetchNextTrending(e||1)}catch(e){console.error(e.message)}finally{O.loader.classList.add("is-hidden")}if(!t.results.length)return void(O.cardsUl.innerHTML="<li>There is no trending movies.</li>");C(t)}})()}();
//# sourceMappingURL=index.69969942.js.map
